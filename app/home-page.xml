<Page xmlns="http://www.nativescript.org/tns.xsd" loaded="pageLoaded" actionBarHidden="false">
	<Page.actionBar>
		<ActionBar>
			<ActionBar.titleView>
		        <StackLayout orientation="horizontal">
		          <Label cssClass="bracketBarTitle" text="&#60; " />
		          <Label cssClass="tabViewTitle" text="{{ title }}" />
		          <Label cssClass="bracketBarTitle" text=" &#62;" />
		        </StackLayout>
	      	</ActionBar.titleView>
	     </ActionBar>
	</Page.actionBar>
  <TabView id="homeTabView" selectedColor="#07DD07" selectedIndex="{{ selectedIndex }}" ios:cssClass="ios-tab-view">
    <TabView.items>
      <TabViewItem title="Challenges" ios:iconSource="{{ selectedIndex == 0 ? 'res://challenges-1' : 'res://challenges' }}" cssClass="tabItem">
        <TabViewItem.view>
					  <!-- <Label id="navHeader" text="&#60; Choose A Challenge &#62;" horizontalAlignment="stretch" cssId="banner"/> -->
            
            <ScrollView>
              <ListView id="category-list" items="{{ categoryList }}" >
                <ListView.itemTemplate>
                    <DockLayout stretchLastChild="true" tap="{{ handler }}" >
                      <Image dock="left" src="{{ imgSrc }}" stretch="none" verticalAlignment="center" cssClass="list-image"/>
                      <!-- <Label cssClass="arrow" verticalAlignment="center" horiziontalAlignment="right" text="&gt;"/> -->
                      <Image dock="right" src="res://arrow" stretch="none" verticalAlignment="center" horiziontalAlignment="right" cssClass="list-arrow"/>
                      <Label cssClass="categoryTitle" text="{{ name }}" verticalAlignment="center" />
                    </DockLayout>
                </ListView.itemTemplate>
              </ListView>
            </ScrollView>
        </TabViewItem.view>
      </TabViewItem>
      
      <TabViewItem title="Leaderboard" ios:iconSource="{{ selectedIndex == 1 ? 'res://leaderboard-1' : 'res://leaderboard' }}" cssClass="tabItem">
        <TabViewItem.view>
        	<ScrollView>
	          <StackLayout orientation="vertical">
              <ActivityIndicator busy="{{ topTenIsLoading }}" id="actIndTopTen" />
              <Repeater items="{{ topTen }}" id="topTenList">
                <Repeater.itemsLayout>
                  <StackLayout orientation="vertical" />
                </Repeater.itemsLayout>
                <Repeater.itemTemplate>
                  <GridLayout columns="*, *, *" rows="*, *" verticalAlignment="left" horizontalAlignment="stretch">
                    <Border cssClass="elts" row="0" col="0" rowSpan="2" colSpan="3"></Border>
                    <Label cssClass="rank" text="{{ num, '&#35;' + num }}" row="0" rowSpan="2" col="0"/>
                    <Label horizontalAlign="Left" id="n1" cssClass="lname" row="0" col="1" colSpan="2">
                      <Label.formattedText>
                        <FormattedString>
                          <FormattedString.spans>
                            <Span text="{{ first_name, first_name + ' ' }}" /> <Span text="{{ last_name }}" />
                          </FormattedString.spans>
                        </FormattedString>
                      </Label.formattedText>
                    </Label>
                    <WrapLayout row="1" col="1">
                      <Label cssClass="pts" text="Points: "/>
                      <Label id="place1" cssClass="pts" text="{{ points }}"/>
                    </WrapLayout>
                  </GridLayout>
                </Repeater.itemTemplate>
              </Repeater>
	          </StackLayout>
	        </ScrollView>
        </TabViewItem.view>
      </TabViewItem>
      
      <TabViewItem title="Profile" ios:iconSource="{{ selectedIndex == 2 ? 'res://profile-1' : 'res://profile' }}" cssClass="tabItem">
        <TabViewItem.view>
          <StackLayout verticalAlignment="center" horizontalAlignment="center" orientation="vertical">
		        <!-- <Image src="~/Downloads/download.jpeg" stretch ="none" / >  -->
		        <Label id="nameVal" text="{{ user.first_name }}"/>
            <Label id="nameVal" text="{{ user.last_name }}"/>
		        <Label id="emailAddr" text="{{ user.email }}"/>
		        <Label cssClass="points" text="Points:"/>
		        <Label cssClass="points" id="pointNum" text="{{ user.total_points }}"/>
		        <WrapLayout>
			        <Label cssClass="challenges" text="Challenges Attempted: "/>
			        <Label id="attemptedBox" cssClass="challenges" text="{{ user.attempted_challenges }}"/>
		        </WrapLayout>
		        <WrapLayout>
			        <Label cssClass="challenges" text="Challenges Completed: "/>
			        <Label id="completedBox" cssClass="challenges" text="{{ user.completed_challenges }}"/>
		        </WrapLayout>
            <Button id="sign-out-button" text="Sign Out" tap="signOut"/>
            <Button id="completed-challenges-button" text="Completed Challenges" tap="compChallenges"/>
	        </StackLayout>
        </TabViewItem.view>
      </TabViewItem>
    </TabView.items>
 </TabView>
</Page>
